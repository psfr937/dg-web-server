_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{Dpqh:function(e,t,n){e.exports={"no-select":"cmsNav_no-select__2UT9e",appNavRow:"cmsNav_appNavRow__3kOnS",actionButton:"cmsNav_actionButton__Ub8sc",appNav:"cmsNav_appNav__2-I_w",appNavImg:"cmsNav_appNavImg__3bUMw",appNavHead:"cmsNav_appNavHead__3yzrg",hidden:"cmsNav_hidden__3qgp6",hover:"cmsNav_hover__3_1G6",appNavHeadTitle:"cmsNav_appNavHeadTitle__1R_ba",burgerMenuButton:"cmsNav_burgerMenuButton__2xhpv",burgerIcon:"cmsNav_burgerIcon__1wCIw",signInUpButton:"cmsNav_signInUpButton__1xeSD",cmsButton:"cmsNav_cmsButton__3nac9",myAccountButton:"cmsNav_myAccountButton__3M78F",sellButton:"cmsNav_sellButton__YP17C",appNavTitle:"cmsNav_appNavTitle__3lk_6",burgerNav:"cmsNav_burgerNav__2Ih-C",burgerNavTitle:"cmsNav_burgerNavTitle__2Pcl0",appNavButton:"cmsNav_appNavButton__BMnpW"}},MCIb:function(e,t,n){"use strict";t.a=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),console.log(e);var n=e.split(",")[0],a=n.split(":")[1].split(";")[0];console.log(n.split(";")[1]);var i=n.split(";")[1].slice(5);console.log(i);for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);var c=new Blob([r],{type:a});return new File([c],i,{type:a})}},XUSk:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cms",function(){return n("kqAj")}])},kqAj:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var a=n("MX0m"),i=n.n(a),r=n("q1tI"),o=n.n(r),c=n("j3dF"),s=n("7han"),u=n("Sn5I"),l=n.n(u),_=n("Dpqh"),p=n.n(_),d=n("TSYQ"),m=n.n(d),v=n("/eHF"),f=n.n(v),g=n("YFqc"),b=n.n(g),N=n("/MKj"),h=n("/lTL"),O=n("Bv16"),D=n("OeZC"),y=n("o6LY"),I=n.n(y),j=(n("xq7h"),o.a.createElement);function w(e){e.action;var t=Object(r.useState)(!1),n=t[0],a=t[1],i=Object(N.d)((function(e){return e.auth.token})),c=(Object(N.d)((function(e){return e.auth.info})),Object(N.d)((function(e){return e.profile}))),s=c.readyStatus===O.c,u=Object(N.c)();Object(r.useEffect)((function(){null===i||s||u({type:D.a})}),[i]);return j(o.a.Fragment,null,j("div",{className:p.a.appNav},j("div",{className:p.a.appNavHead},j("div",{onClick:function(){a(!n)},className:p.a.burgerMenuButton},j("svg",{className:p.a.burgerIcon,viewBox:"0 0 24 24"},j("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"}))),j("a",{href:"/cms/create"},j("button",{className:I.a.saveButton},"Create Product"))),j("div",null,j("div",{className:p.a.appNavRow},s&&!0===c.data.admin?j(b.a,{href:"/shopping"},j("div",{className:p.a.cmsButton},j("h4",null," Shop "))):null,s?null:j(b.a,{href:"/login"},j("div",{className:p.a.signInUpButton},j("h4",null," Sign In "))),s?j(b.a,{href:null!==i?"/profile/recycle-history":"/register"},j("div",{className:p.a.myAccountButton},j("h4",null," ","Hi, ".concat(c.data.name)),j(h.a,null))):j(b.a,{href:"/register"},j("div",{className:p.a.signInUpButton},j("h4",null," Sign Up ")))))),j("div",{className:n?p.a.burgerNav:m()(p.a.burgerNav,p.a.hidden)},j(f.a,{delay:50,duration:300,top:!0,when:!0===n},j(b.a,{href:"/shopping",className:p.a.burgerNavTitle},"Shopping")),j(f.a,{delay:150,duration:300,top:!0,when:!0===n},j(b.a,{href:"/recycle",className:p.a.burgerNavTitle},"Recycle"))))}var B=n("MSpX"),x=n.n(B),S=o.a.createElement;function T(){return S("div",{className:"jsx-3659784865"},S(i.a,{id:"3659784865"},["body{margin:0;overflow-x:hidden;}"]),S(s.a,null),S("main",{className:"jsx-3659784865 "+(l.a.app||"")},S(w,null),S("div",{className:"jsx-3659784865 "+(x.a.navPadding||"")},S(c.a,{cms:!0}))))}},o6LY:function(e,t,n){e.exports={navPadding:"itemDetail_navPadding__ozmZd",saveButtonContainer:"itemDetail_saveButtonContainer__sr_2S",saveButton:"itemDetail_saveButton__2wWhg",backButton:"itemDetail_backButton__35w4l",productDetailPage:"itemDetail_productDetailPage__3KLti",productDetail:"itemDetail_productDetail__35Boc",productInfo:"itemDetail_productInfo__14asY",title:"itemDetail_title__3jzCU",price:"itemDetail_price__g25gs",description:"itemDetail_description__1O-Ms",productSizesInfo:"itemDetail_productSizesInfo__1JzvP",productSizesList:"itemDetail_productSizesList__3O3GN",productTagsInfo:"itemDetail_productTagsInfo__1xrN0",productTagsList:"itemDetail_productTagsList__274Wz",callToActionSection:"itemDetail_callToActionSection__3bTes",addToCartButton:"itemDetail_addToCartButton__2wbWr",addToWishListButton:"itemDetail_addToWishListButton__Hu2Rs",productInfoContainer:"itemDetail_productInfoContainer__15f7B",suggestionSection:"itemDetail_suggestionSection__1dioS",suggestionSectionTitle:"itemDetail_suggestionSectionTitle__LbDSX",suggestionSectionContent:"itemDetail_suggestionSectionContent__1XLft",bottomSection:"itemDetail_bottomSection__3unDp",leftDescriptionFieldContainer:"itemDetail_leftDescriptionFieldContainer__ky9i8",rightDescriptionFieldContainer:"itemDetail_rightDescriptionFieldContainer__24_Dw",descriptionField:"itemDetail_descriptionField__3Wdcx",inventoryFieldItem:"itemDetail_inventoryFieldItem__1Kk1i",tagMenu:"itemDetail_tagMenu__1eNpp",sizeMenuCombo:"itemDetail_sizeMenuCombo__1PBDK",measurementMenu:"itemDetail_measurementMenu__3pOiI",sizeMenu:"itemDetail_sizeMenu__1rQfu",removeButton:"itemDetail_removeButton__FsRIx"}},xq7h:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return N}));var a=n("o0o1"),i=n.n(a),r=n("rePB"),o=n("YwnL"),c=n("taz7"),s=(n("s4NR"),{addInventory:function(e){return Object(c.a)(o.c,"/inventories/add",{files:e})},updateInventory:function(e,t){return Object(c.a)(o.c,"/inventories/".concat(t),{files:e})},removeInventory:function(e){return Object(c.a)(o.a,"/inventories/".concat(e))}}),u=n("MCIb"),l=n("5rFJ"),_=n("nOHt"),p=n.n(_),d=i.a.mark(h),m=i.a.mark(y),v=i.a.mark(I);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b="ADD_INVENTORY",N="UPDATE_INVENTORY";function h(){var e,t,n,a,r,o,c,_,m;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(l.d)((function(e){return e.oneInventory}));case 2:return e=i.sent.data,i.next=5,Object(l.d)((function(e){return e.editInventory}));case 5:return t=i.sent,n=D(e.images,t.images),a=O(e.tags.map((function(e){return e.id})),t.tags.map((function(e){return e.id}))),console.log(e.sizes),console.log(t.sizes),r=O(e.sizes.map((function(e){return e.id})),t.sizes.map((function(e){return e.id}))),o={price:t.price,brand:t.brand,sellerId:t.seller.id,texts:t.text,images:{remove:n.remove},tags:{insert:a.insert,remove:a.remove},sizes:{insert:r.insert,remove:r.remove}},console.log(o),c={},t.images.filter((function(e){return"file"in e})).forEach((function(e){var n=Object(u.a)(e.url);c["image-".concat(t.id,"-").concat(e.order)]=n})),console.log(o),console.log(c),i.prev=17,i.next=20,Object(l.b)(s.addInventory,g(g({},c),{},{data:JSON.stringify(o)}));case 20:_=i.sent,m=_.data.data,p.a.push("/cms/product/p/".concat(m)),i.next=27;break;case 25:i.prev=25,i.t0=i.catch(17);case 27:case"end":return i.stop()}}),d,null,[[17,25]])}var O=function(e,t){var n=e.filter((function(e){return t.indexOf(e)<0}));return{insert:t.filter((function(t){return e.indexOf(t)<0})),remove:n}},D=function(e,t){var n=e.map((function(e){return e.order})),a=t.map((function(e){return e.order}));return console.log(n),console.log(a),{remove:n.filter((function(e){return a.indexOf(e)<0}))}};function y(){var e,t,n,a,r,o,c;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(l.d)((function(e){return e.oneInventory}));case 2:return e=i.sent.data,i.next=5,Object(l.d)((function(e){return e.editInventory}));case 5:return t=i.sent,n=D(e.images,t.images),a=O(e.tags.map((function(e){return e.id})),t.tags.map((function(e){return e.id}))),console.log(e.sizes),console.log(t.sizes),r=O(e.sizes.map((function(e){return e.id})),t.sizes.map((function(e){return e.id}))),o={price:t.price,brand:t.brand,sellerId:t.seller.id,texts:t.text,images:{remove:n.remove},tags:{insert:a.insert,remove:a.remove},sizes:{insert:r.insert,remove:r.remove}},console.log(o),c={},t.images.filter((function(e){return"file"in e})).forEach((function(e){var n=Object(u.a)(e.url);c["image-".concat(t.id,"-").concat(e.order)]=n})),console.log(o),console.log(c),i.prev=17,i.next=20,Object(l.b)(s.updateInventory,g(g({},c),{},{data:JSON.stringify(o)}),t.id);case 20:i.sent,i.next=25;break;case 23:i.prev=23,i.t0=i.catch(17);case 25:case"end":return i.stop()}}),m,null,[[17,23]])}function I(e){var t,n,a,r,o;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.id,i.next=3,Object(l.d)((function(e){return e.editInventory}));case 3:return n=i.sent,a=n.attachment.pictures,r={body:n.body,title:n.title,nameZh:n.nameZh,nameEn:n.nameEn,descriptionZh:n.descriptionZh,descriptionEn:n.descriptionEn,tags:n.tags,sizes:n.sizes},o={},a.map((function(e,t){var n=Object(u.a)(e);console.log(n),o["image_".concat(t)]=n})),i.prev=8,i.next=11,Object(l.b)(s.updateInventory,g(g({},o),{},{data:JSON.stringify(r)}),t);case 11:i.sent,i.next=16;break;case 14:i.prev=14,i.t0=i.catch(8);case 16:case"end":return i.stop()}}),v,null,[[8,14]])}t.c=[Object(l.e)(b,h),Object(l.e)(N,y),Object(l.e)("REMOVE_INVENTORIES",I)]}},[["XUSk",1,0,2,3,4,5,6,7,11,14,15]]]);