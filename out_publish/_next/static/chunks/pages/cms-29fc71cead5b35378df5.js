_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{"4JlD":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,c){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?i(o(e),(function(o){var c=encodeURIComponent(r(o))+n;return a(e[o])?i(e[o],(function(e){return c+encodeURIComponent(r(e))})).join(t):c+encodeURIComponent(r(e[o]))})).join(t):c?encodeURIComponent(r(c))+n+encodeURIComponent(r(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},Dpqh:function(e,t,n){e.exports={"no-select":"cmsNav_no-select__2UT9e",appNavRow:"cmsNav_appNavRow__3kOnS",actionButton:"cmsNav_actionButton__Ub8sc",appNav:"cmsNav_appNav__2-I_w",appNavImg:"cmsNav_appNavImg__3bUMw",appNavHead:"cmsNav_appNavHead__3yzrg",hidden:"cmsNav_hidden__3qgp6",hover:"cmsNav_hover__3_1G6",appNavHeadTitle:"cmsNav_appNavHeadTitle__1R_ba",burgerMenuButton:"cmsNav_burgerMenuButton__2xhpv",burgerIcon:"cmsNav_burgerIcon__1wCIw",signInUpButton:"cmsNav_signInUpButton__1xeSD",cmsButton:"cmsNav_cmsButton__3nac9",myAccountButton:"cmsNav_myAccountButton__3M78F",sellButton:"cmsNav_sellButton__YP17C",appNavTitle:"cmsNav_appNavTitle__3lk_6",burgerNav:"cmsNav_burgerNav__2Ih-C",burgerNavTitle:"cmsNav_burgerNavTitle__2Pcl0",appNavButton:"cmsNav_appNavButton__BMnpW"}},MCIb:function(e,t,n){"use strict";t.a=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),console.log(e);var n=e.split(",")[0],r=n.split(":")[1].split(";")[0];console.log(n.split(";")[1]);var a=n.split(";")[1].slice(5);console.log(a);for(var i=new Uint8Array(t.length),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);var c=new Blob([i],{type:r});return new File([c],a,{type:r})}},XUSk:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cms",function(){return n("kqAj")}])},kd2E:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!==typeof e||0===e.length)return o;var c=/\+/g;e=e.split(t);var s=1e3;i&&"number"===typeof i.maxKeys&&(s=i.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var p,d,_,m,f=e[l].replace(c,"%20"),v=f.indexOf(n);v>=0?(p=f.substr(0,v),d=f.substr(v+1)):(p=f,d=""),_=decodeURIComponent(p),m=decodeURIComponent(d),r(o,_)?a(o[_])?o[_].push(m):o[_]=[o[_],m]:o[_]=m}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},kqAj:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var r=n("MX0m"),a=n.n(r),i=n("q1tI"),o=n.n(i),c=n("j3dF"),s=n("7han"),u=n("Sn5I"),l=n.n(u),p=n("Dpqh"),d=n.n(p),_=n("TSYQ"),m=n.n(_),f=n("/eHF"),v=n.n(f),g=n("YFqc"),b=n.n(g),N=n("/MKj"),h=n("/lTL"),O=n("Bv16"),y=n("OeZC"),D=n("o6LY"),j=n.n(D),w=(n("xq7h"),n("nOHt")),I=n.n(w),x=function(e){var t=window.document.cookie;console.log(t);var n=e+"=",r=t.indexOf("; "+n);if(-1==r){if(0!=(r=t.indexOf(n)))return null}else{r+=2;var a=window.document.cookie.indexOf(";",r);-1==a&&(a=t.length)}var i=decodeURI(t.substring(r+n.length,a));return console.log(e),console.log(i),i},B=o.a.createElement;function S(e){e.action;var t=Object(i.useState)(!1),n=t[0],r=t[1],a=Object(N.d)((function(e){return e.auth.token})),c=(Object(N.d)((function(e){return e.auth.info})),Object(N.d)((function(e){return e.profile}))),s=c.readyStatus===O.c,u=Object(N.c)();Object(i.useEffect)((function(){null===x("token")&&I.a.push("/login")}),[]),Object(i.useEffect)((function(){null===x("token")||s||u({type:y.a})}),[a]),Object(i.useEffect)((function(){s&&!1===c.data.admin&&I.a.push("/error/denied")}),[s]);return B(o.a.Fragment,null,B("div",{className:d.a.appNav},B("div",{className:d.a.appNavHead},B("div",{onClick:function(){r(!n)},className:d.a.burgerMenuButton},B("svg",{className:d.a.burgerIcon,viewBox:"0 0 24 24"},B("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"}))),B("a",{href:"/cms/create"},B("button",{className:j.a.saveButton},"Create Product"))),B("div",null,B("div",{className:d.a.appNavRow},s&&!0===c.data.admin?B(b.a,{href:"/shopping"},B("div",{className:d.a.cmsButton},B("h4",null," Shop "))):null,s?null:B(b.a,{href:"/login"},B("div",{className:d.a.signInUpButton},B("h4",null," Sign In "))),s?B(b.a,{href:null!==a?"/profile/recycle-history":"/register"},B("div",{className:d.a.myAccountButton},B("h4",null," ","Hi, ".concat(c.data.name)),B(h.a,null))):B(b.a,{href:"/register"},B("div",{className:d.a.signInUpButton},B("h4",null," Sign Up ")))))),B("div",{className:n?d.a.burgerNav:m()(d.a.burgerNav,d.a.hidden)},B(v.a,{delay:50,duration:300,top:!0,when:!0===n},B(b.a,{href:"/shopping",className:d.a.burgerNavTitle},"Shopping")),B(v.a,{delay:150,duration:300,top:!0,when:!0===n},B(b.a,{href:"/recycle",className:d.a.burgerNavTitle},"Recycle"))))}var C=n("MSpX"),T=n.n(C),E=n("EyDb"),k=n.n(E),z=n("QEJN"),P=o.a.createElement,M=k()("XSR6ZP990B","e3d7f522186e977cdb3d84474d85f038");function R(){return P("div",{className:"jsx-3659784865"},P(a.a,{id:"3659784865"},["body{margin:0;overflow-x:hidden;}"]),P(s.a,null),P("main",{className:"jsx-3659784865 "+(l.a.app||"")},P(z.a,{indexName:"dev_dg",searchClient:M},P(S,null),P("div",{className:"jsx-3659784865 "+(T.a.navPadding||"")},P(c.a,{cms:!0})))))}},o6LY:function(e,t,n){e.exports={navPadding:"itemDetail_navPadding__ozmZd",saveButtonContainer:"itemDetail_saveButtonContainer__sr_2S",saveButton:"itemDetail_saveButton__2wWhg",backButton:"itemDetail_backButton__35w4l",productDetailPage:"itemDetail_productDetailPage__3KLti",productDetail:"itemDetail_productDetail__35Boc",productInfo:"itemDetail_productInfo__14asY",title:"itemDetail_title__3jzCU",price:"itemDetail_price__g25gs",description:"itemDetail_description__1O-Ms",productSizesInfo:"itemDetail_productSizesInfo__1JzvP",productSizesList:"itemDetail_productSizesList__3O3GN",productTagsInfo:"itemDetail_productTagsInfo__1xrN0",productTagsList:"itemDetail_productTagsList__274Wz",callToActionSection:"itemDetail_callToActionSection__3bTes",addToCartButton:"itemDetail_addToCartButton__2wbWr",addToWishListButton:"itemDetail_addToWishListButton__Hu2Rs",productInfoContainer:"itemDetail_productInfoContainer__15f7B",suggestionSection:"itemDetail_suggestionSection__1dioS",suggestionSectionTitle:"itemDetail_suggestionSectionTitle__LbDSX",suggestionSectionContent:"itemDetail_suggestionSectionContent__1XLft",bottomSection:"itemDetail_bottomSection__3unDp",leftDescriptionFieldContainer:"itemDetail_leftDescriptionFieldContainer__ky9i8",rightDescriptionFieldContainer:"itemDetail_rightDescriptionFieldContainer__24_Dw",descriptionField:"itemDetail_descriptionField__3Wdcx",inventoryFieldItem:"itemDetail_inventoryFieldItem__1Kk1i",tagMenu:"itemDetail_tagMenu__1eNpp",sizeMenuCombo:"itemDetail_sizeMenuCombo__1PBDK",measurementMenu:"itemDetail_measurementMenu__3pOiI",sizeMenu:"itemDetail_sizeMenu__1rQfu",removeButton:"itemDetail_removeButton__FsRIx"}},s4NR:function(e,t,n){"use strict";t.decode=t.parse=n("kd2E"),t.encode=t.stringify=n("4JlD")},xq7h:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return h}));var r=n("o0o1"),a=n.n(r),i=n("rePB"),o=n("YwnL"),c=n("taz7"),s=(n("s4NR"),function(e){return Object(c.a)(o.c,"/inventories/add",{files:e})}),u=function(e,t){return Object(c.a)(o.c,"/inventories/".concat(t),{files:e})},l=n("MCIb"),p=n("5rFJ"),d=n("nOHt"),_=n.n(d),m=a.a.mark(O),f=a.a.mark(j),v=a.a.mark(w);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N="ADD_INVENTORY",h="UPDATE_INVENTORY";function O(){var e,t,n,r,i,o,c,u,d;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.d)((function(e){return e.oneInventory}));case 2:return e=a.sent.data,a.next=5,Object(p.d)((function(e){return e.editInventory}));case 5:return t=a.sent,n=D(e.images,t.images),r=y(e.tags.map((function(e){return e.id})),t.tags.map((function(e){return e.id}))),console.log(e.sizes),console.log(t.sizes),i=y(e.sizes.map((function(e){return e.id})),t.sizes.map((function(e){return e.id}))),o={price:t.price,brand:t.brand,sellerId:t.seller.id,texts:t.text,images:{remove:n.remove},tags:{insert:r.insert,remove:r.remove},sizes:{insert:i.insert,remove:i.remove}},console.log(o),c={},t.images.filter((function(e){return"file"in e})).forEach((function(e){var n=Object(l.a)(e.url);c["image-".concat(t.id,"-").concat(e.order)]=n})),console.log(o),console.log(c),a.prev=17,a.next=20,Object(p.b)(s,b(b({},c),{},{data:JSON.stringify(o)}));case 20:u=a.sent,d=u.data.data,_.a.push("/cms/product/p/".concat(d)),a.next=27;break;case 25:a.prev=25,a.t0=a.catch(17);case 27:case"end":return a.stop()}}),m,null,[[17,25]])}var y=function(e,t){var n=e.filter((function(e){return t.indexOf(e)<0}));return{insert:t.filter((function(t){return e.indexOf(t)<0})),remove:n}},D=function(e,t){var n=e.map((function(e){return e.order})),r=t.map((function(e){return e.order}));return console.log(n),console.log(r),{remove:n.filter((function(e){return r.indexOf(e)<0}))}};function j(){var e,t,n,r,i,o,c;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.d)((function(e){return e.oneInventory}));case 2:return e=a.sent.data,a.next=5,Object(p.d)((function(e){return e.editInventory}));case 5:return t=a.sent,n=D(e.images,t.images),r=y(e.tags.map((function(e){return e.id})),t.tags.map((function(e){return e.id}))),console.log(e.sizes),console.log(t.sizes),i=y(e.sizes.map((function(e){return e.id})),t.sizes.map((function(e){return e.id}))),o={price:t.price,brand:t.brand,sellerId:t.seller.id,texts:t.text,images:{remove:n.remove},tags:{insert:r.insert,remove:r.remove},sizes:{insert:i.insert,remove:i.remove}},console.log(o),c={},t.images.filter((function(e){return"file"in e})).forEach((function(e){var n=Object(l.a)(e.url);c["image-".concat(t.id,"-").concat(e.order)]=n})),console.log(o),console.log(c),a.prev=17,a.next=20,Object(p.b)(u,b(b({},c),{},{data:JSON.stringify(o)}),t.id);case 20:a.sent,a.next=25;break;case 23:a.prev=23,a.t0=a.catch(17);case 25:case"end":return a.stop()}}),f,null,[[17,23]])}function w(e){var t,n,r,i,o;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,Object(p.d)((function(e){return e.editInventory}));case 3:return n=a.sent,r=n.attachment.pictures,i={body:n.body,title:n.title,nameZh:n.nameZh,nameEn:n.nameEn,descriptionZh:n.descriptionZh,descriptionEn:n.descriptionEn,tags:n.tags,sizes:n.sizes},o={},r.map((function(e,t){var n=Object(l.a)(e);console.log(n),o["image_".concat(t)]=n})),a.prev=8,a.next=11,Object(p.b)(u,b(b({},o),{},{data:JSON.stringify(i)}),t);case 11:a.sent,a.next=16;break;case 14:a.prev=14,a.t0=a.catch(8);case 16:case"end":return a.stop()}}),v,null,[[8,14]])}t.c=[Object(p.e)(N,O),Object(p.e)(h,j),Object(p.e)("REMOVE_INVENTORIES",w)]}},[["XUSk",1,0,2,4,3,5,6,7,10,14]]]);