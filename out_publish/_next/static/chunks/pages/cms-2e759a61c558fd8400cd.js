_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[36],{"4JlD":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,c){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?i(o(e),(function(o){var c=encodeURIComponent(r(o))+n;return a(e[o])?i(e[o],(function(e){return c+encodeURIComponent(r(e))})).join(t):c+encodeURIComponent(r(e[o]))})).join(t):c?encodeURIComponent(r(c))+n+encodeURIComponent(r(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},Dpqh:function(e,t,n){e.exports={"no-select":"cmsNav_no-select__2UT9e",appNavRow:"cmsNav_appNavRow__3kOnS",actionButton:"cmsNav_actionButton__Ub8sc",appNav:"cmsNav_appNav__2-I_w",appNavImg:"cmsNav_appNavImg__3bUMw",appNavHead:"cmsNav_appNavHead__3yzrg",hidden:"cmsNav_hidden__3qgp6",hover:"cmsNav_hover__3_1G6",appNavHeadTitle:"cmsNav_appNavHeadTitle__1R_ba",burgerMenuButton:"cmsNav_burgerMenuButton__2xhpv",burgerIcon:"cmsNav_burgerIcon__1wCIw",signInUpButton:"cmsNav_signInUpButton__1xeSD",cmsButton:"cmsNav_cmsButton__3nac9",myAccountButton:"cmsNav_myAccountButton__3M78F",sellButton:"cmsNav_sellButton__YP17C",appNavTitle:"cmsNav_appNavTitle__3lk_6",burgerNav:"cmsNav_burgerNav__2Ih-C",burgerNavTitle:"cmsNav_burgerNavTitle__2Pcl0",appNavButton:"cmsNav_appNavButton__BMnpW"}},MCIb:function(e,t,n){"use strict";t.a=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),console.log(e);var n=e.split(",")[0],r=n.split(":")[1].split(";")[0];console.log(n.split(";")[1]);var a=n.split(";")[1].slice(5);console.log(a);for(var i=new Uint8Array(t.length),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);var c=new Blob([i],{type:r});return new File([c],a,{type:r})}},XUSk:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cms",function(){return n("kqAj")}])},kd2E:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!==typeof e||0===e.length)return o;var c=/\+/g;e=e.split(t);var s=1e3;i&&"number"===typeof i.maxKeys&&(s=i.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var p,_,d,m,v=e[l].replace(c,"%20"),f=v.indexOf(n);f>=0?(p=v.substr(0,f),_=v.substr(f+1)):(p=v,_=""),d=decodeURIComponent(p),m=decodeURIComponent(_),r(o,d)?a(o[d])?o[d].push(m):o[d]=[o[d],m]:o[d]=m}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},kqAj:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var r=n("MX0m"),a=n.n(r),i=n("q1tI"),o=n.n(i),c=n("j3dF"),s=n("7han"),u=n("Sn5I"),l=n.n(u),p=n("Dpqh"),_=n.n(p),d=n("TSYQ"),m=n.n(d),v=n("/eHF"),f=n.n(v),g=n("YFqc"),b=n.n(g),N=n("/MKj"),h=n("/lTL"),O=n("Bv16"),y=n("OeZC"),D=n("o6LY"),j=n.n(D),I=(n("xq7h"),o.a.createElement);function w(e){e.action;var t=Object(i.useState)(!1),n=t[0],r=t[1],a=Object(N.d)((function(e){return e.auth.token})),c=(Object(N.d)((function(e){return e.auth.info})),Object(N.d)((function(e){return e.profile}))),s=c.readyStatus===O.c,u=Object(N.c)();Object(i.useEffect)((function(){null===a||s||u({type:y.a})}),[a]);return I(o.a.Fragment,null,I("div",{className:_.a.appNav},I("div",{className:_.a.appNavHead},I("div",{onClick:function(){r(!n)},className:_.a.burgerMenuButton},I("svg",{className:_.a.burgerIcon,viewBox:"0 0 24 24"},I("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"}))),I("a",{href:"/cms/create"},I("button",{className:j.a.saveButton},"Create Product"))),I("div",null,I("div",{className:_.a.appNavRow},s&&!0===c.data.admin?I(b.a,{href:"/shopping"},I("div",{className:_.a.cmsButton},I("h4",null," Shop "))):null,s?null:I(b.a,{href:"/login"},I("div",{className:_.a.signInUpButton},I("h4",null," Sign In "))),s?I(b.a,{href:null!==a?"/profile/recycle-history":"/register"},I("div",{className:_.a.myAccountButton},I("h4",null," ","Hi, ".concat(c.data.name)),I(h.a,null))):I(b.a,{href:"/register"},I("div",{className:_.a.signInUpButton},I("h4",null," Sign Up ")))))),I("div",{className:n?_.a.burgerNav:m()(_.a.burgerNav,_.a.hidden)},I(f.a,{delay:50,duration:300,top:!0,when:!0===n},I(b.a,{href:"/shopping",className:_.a.burgerNavTitle},"Shopping")),I(f.a,{delay:150,duration:300,top:!0,when:!0===n},I(b.a,{href:"/recycle",className:_.a.burgerNavTitle},"Recycle"))))}var x=n("MSpX"),B=n.n(x),S=o.a.createElement;function C(){return S("div",{className:"jsx-3659784865"},S(a.a,{id:"3659784865"},["body{margin:0;overflow-x:hidden;}"]),S(s.a,null),S("main",{className:"jsx-3659784865 "+(l.a.app||"")},S(w,null),S("div",{className:"jsx-3659784865 "+(B.a.navPadding||"")},S(c.a,{cms:!0}))))}},o6LY:function(e,t,n){e.exports={navPadding:"itemDetail_navPadding__ozmZd",saveButtonContainer:"itemDetail_saveButtonContainer__sr_2S",saveButton:"itemDetail_saveButton__2wWhg",backButton:"itemDetail_backButton__35w4l",productDetailPage:"itemDetail_productDetailPage__3KLti",productDetail:"itemDetail_productDetail__35Boc",productInfo:"itemDetail_productInfo__14asY",title:"itemDetail_title__3jzCU",price:"itemDetail_price__g25gs",description:"itemDetail_description__1O-Ms",productSizesInfo:"itemDetail_productSizesInfo__1JzvP",productSizesList:"itemDetail_productSizesList__3O3GN",productTagsInfo:"itemDetail_productTagsInfo__1xrN0",productTagsList:"itemDetail_productTagsList__274Wz",callToActionSection:"itemDetail_callToActionSection__3bTes",addToCartButton:"itemDetail_addToCartButton__2wbWr",addToWishListButton:"itemDetail_addToWishListButton__Hu2Rs",productInfoContainer:"itemDetail_productInfoContainer__15f7B",suggestionSection:"itemDetail_suggestionSection__1dioS",suggestionSectionTitle:"itemDetail_suggestionSectionTitle__LbDSX",suggestionSectionContent:"itemDetail_suggestionSectionContent__1XLft",bottomSection:"itemDetail_bottomSection__3unDp",leftDescriptionFieldContainer:"itemDetail_leftDescriptionFieldContainer__ky9i8",rightDescriptionFieldContainer:"itemDetail_rightDescriptionFieldContainer__24_Dw",descriptionField:"itemDetail_descriptionField__3Wdcx",inventoryFieldItem:"itemDetail_inventoryFieldItem__1Kk1i",tagMenu:"itemDetail_tagMenu__1eNpp",sizeMenuCombo:"itemDetail_sizeMenuCombo__1PBDK",measurementMenu:"itemDetail_measurementMenu__3pOiI",sizeMenu:"itemDetail_sizeMenu__1rQfu",removeButton:"itemDetail_removeButton__FsRIx"}},s4NR:function(e,t,n){"use strict";t.decode=t.parse=n("kd2E"),t.encode=t.stringify=n("4JlD")},xq7h:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return h}));var r=n("o0o1"),a=n.n(r),i=n("rePB"),o=n("YwnL"),c=n("taz7"),s=(n("s4NR"),function(e){return Object(c.a)(o.c,"/inventories/add",{files:e})}),u=function(e,t){return Object(c.a)(o.c,"/inventories/".concat(t),{files:e})},l=n("MCIb"),p=n("5rFJ"),_=n("nOHt"),d=n.n(_),m=a.a.mark(O),v=a.a.mark(j),f=a.a.mark(I);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N="ADD_INVENTORY",h="UPDATE_INVENTORY";function O(){var e,t,n,r,i,o,c,u,_;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.d)((function(e){return e.oneInventory}));case 2:return e=a.sent.data,a.next=5,Object(p.d)((function(e){return e.editInventory}));case 5:return t=a.sent,n=D(e.images,t.images),r=y(e.tags.map((function(e){return e.id})),t.tags.map((function(e){return e.id}))),console.log(e.sizes),console.log(t.sizes),i=y(e.sizes.map((function(e){return e.id})),t.sizes.map((function(e){return e.id}))),o={price:t.price,brand:t.brand,sellerId:t.seller.id,texts:t.text,images:{remove:n.remove},tags:{insert:r.insert,remove:r.remove},sizes:{insert:i.insert,remove:i.remove}},console.log(o),c={},t.images.filter((function(e){return"file"in e})).forEach((function(e){var n=Object(l.a)(e.url);c["image-".concat(t.id,"-").concat(e.order)]=n})),console.log(o),console.log(c),a.prev=17,a.next=20,Object(p.b)(s,b(b({},c),{},{data:JSON.stringify(o)}));case 20:u=a.sent,_=u.data.data,d.a.push("/cms/product/p/".concat(_)),a.next=27;break;case 25:a.prev=25,a.t0=a.catch(17);case 27:case"end":return a.stop()}}),m,null,[[17,25]])}var y=function(e,t){var n=e.filter((function(e){return t.indexOf(e)<0}));return{insert:t.filter((function(t){return e.indexOf(t)<0})),remove:n}},D=function(e,t){var n=e.map((function(e){return e.order})),r=t.map((function(e){return e.order}));return console.log(n),console.log(r),{remove:n.filter((function(e){return r.indexOf(e)<0}))}};function j(){var e,t,n,r,i,o,c;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.d)((function(e){return e.oneInventory}));case 2:return e=a.sent.data,a.next=5,Object(p.d)((function(e){return e.editInventory}));case 5:return t=a.sent,n=D(e.images,t.images),r=y(e.tags.map((function(e){return e.id})),t.tags.map((function(e){return e.id}))),console.log(e.sizes),console.log(t.sizes),i=y(e.sizes.map((function(e){return e.id})),t.sizes.map((function(e){return e.id}))),o={price:t.price,brand:t.brand,sellerId:t.seller.id,texts:t.text,images:{remove:n.remove},tags:{insert:r.insert,remove:r.remove},sizes:{insert:i.insert,remove:i.remove}},console.log(o),c={},t.images.filter((function(e){return"file"in e})).forEach((function(e){var n=Object(l.a)(e.url);c["image-".concat(t.id,"-").concat(e.order)]=n})),console.log(o),console.log(c),a.prev=17,a.next=20,Object(p.b)(u,b(b({},c),{},{data:JSON.stringify(o)}),t.id);case 20:a.sent,a.next=25;break;case 23:a.prev=23,a.t0=a.catch(17);case 25:case"end":return a.stop()}}),v,null,[[17,23]])}function I(e){var t,n,r,i,o;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,Object(p.d)((function(e){return e.editInventory}));case 3:return n=a.sent,r=n.attachment.pictures,i={body:n.body,title:n.title,nameZh:n.nameZh,nameEn:n.nameEn,descriptionZh:n.descriptionZh,descriptionEn:n.descriptionEn,tags:n.tags,sizes:n.sizes},o={},r.map((function(e,t){var n=Object(l.a)(e);console.log(n),o["image_".concat(t)]=n})),a.prev=8,a.next=11,Object(p.b)(u,b(b({},o),{},{data:JSON.stringify(i)}),t);case 11:a.sent,a.next=16;break;case 14:a.prev=14,a.t0=a.catch(8);case 16:case"end":return a.stop()}}),f,null,[[8,14]])}t.c=[Object(p.e)(N,O),Object(p.e)(h,j),Object(p.e)("REMOVE_INVENTORIES",I)]}},[["XUSk",0,1,2,3,4,5,6,7,8,10,13]]]);